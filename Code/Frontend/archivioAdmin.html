<!DOCTYPE html>

<html>
  <head>
    <title>Archivio EasyLib</title>  
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kalam:wght@300;400&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/header.css">
    <link rel="stylesheet" href="styles/logo-section.css">
    <link rel="stylesheet" href="styles/background.css">
    <link rel="stylesheet" href="styles/general.css">
    <link rel="stylesheet" href="styles/archivio.css">
  </head>

  <body>
    <!-- inizio header -->
    <div class="header">
      <div class="left-section">
          La tua biblioteca a portata di click!!
      </div>
      <div class="middle-section"></div>
      <div class="right-section">
        <div class="icon-container">
          <img class="icon-facebook" src="photos/facebook-icon.png">
          <img class="icon-instagram" src="photos/instagram-icon.png">
          <img class="icon-twitter" src="photos/twitter-icon.png">
          <img class="icon-whatsapp" src="photos/whatsapp-icon.png">
        </div>  
      </div>
    </div>

  <div class="content-container">
    <div class="logo-column">
      <img class="logo" src="photos/logo.png">
      <div class="nome-lib">
        EasyLib
      </div>
    </div>
    <div class="search-column">
      <input id="searchBar" type="text" onkeypress="handle(event)" placeholder="Search" class="search-bar">
    </div>
    <div class="link-column">
      <a href="homepageAdmin.html" class="home-link">Home</a>
      <a href="archivioAdmin.html">Archivio</a>
      <a href="donazione.html">Donazioni</a>
      <a href="paginaUtenti.html">Utenti</a>
    </div>
      <div class="login-column" id="loginColumn">
        <button class="login-button" id="loginButton" onclick="login()">Login</button>
      </div>
      <div class="user-info" id="userInfo" style = "display: none">
        <p class = "userFullName" id="userFullName"></p>
        <p class="logout" id="logoutButton" onclick = "logout()">logout</p>
      </div>
    </div>
</div>
<!-- fine header -->
  
<!-- inizio sidebar -->
    <div class="sidebar">
      <div class="filtro">
        <h3>Autore</h3>
        <div class="scelta">
          <input type="radio" id="autore1" name="filtro" value="Kafka">
          <label for="autore1">Kafka</label>
        </div>
        <div class="scelta">
          <input type="radio" id="autore2" name="filtro" value="Calvino">
          <label for="autore2">Calvino</label>
        </div>
        <div class="scelta">
          <input type="radio" id="autore3" name="filtro" value="Pirandello">
          <label for="autore3">Pirandello</label>
        </div>
        <h3>Genere</h3>
        <div class="scelta">
          <input type="radio" id="genere1" name="filtro" value="Romanzo">
          <label for="genere1">Romanzo</label>
        </div>
        <div class="scelta">
          <input type="radio" id="genere2" name="filtro" value="Fantascienza">
          <label for="genere2">Fantascienza</label>
        </div>
        <div class="scelta">
          <input type="radio" id="genere3" name="filtro" value="Tragedia">
          <label for="genere3">Tragedia</label>
        </div>
      </div>
      <button class="conferma-filtri" id = "confermaFiltri" onclick="filtri()">Conferma Filtri</button> 
    </div>
    <!-- fine sidebar -->
  
    <!-- inizio bookList -->
    <div id="bookList"></div>
    <!-- fine bookList -->
  
    <script>
      // Seleziona tutti i bottoni di prenotazione
      var prenotaButtons = document.querySelectorAll(".bottone-prenota");
      // Aggiungi un evento di click a ciascun bottone di prenotazione
      prenotaButtons.forEach(function(button, index) {
        button.addEventListener("click", function() {
          // Genera l'URL in base all'indice del pulsante e reindirizza l'utente
          window.location.href = "/appuntamentoLibro.html?id=" + (index + 1);
        });
      });

      document.addEventListener('DOMContentLoaded', function() {
        // Recupera i dati utente dalla localStorage
        const loggedUserJSON = localStorage.getItem('loggedUser');
        if (loggedUserJSON) {
          const loggedUser = JSON.parse(loggedUserJSON);
          // Nasconde il pulsante di login
          document.getElementById('loginColumn').style.display = 'none';
          // Mostra le informazioni dell'utente e il pulsante di logout
          document.getElementById('userInfo').style.display = 'block';
          document.getElementById('userFullName').textContent = loggedUser.nome;
          document.getElementById('loggedUser1').style.display = 'block';
          document.getElementById('loggedUser2').style.display = 'block';
          document.getElementById('loggedUser3').style.display = 'block';
          document.getElementById('loggedUser4').style.display = 'block';
        }
        fetchBooks();
      });

      var loginButton = document.getElementById("loginButton");
      loginButton.addEventListener("click", function() {
        window.location.href = "login.html";
      })
    </script>

    <script src = "script.js"></script>
  </body>
</html>